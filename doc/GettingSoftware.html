<html>
<head>
<title>Syzygy: Getting the Software</title>
</head>
<body bgcolor="#ffffff">
<a href="index.html">Documentation Index</a>

<p><font size=+2>Syzygy: Getting the Software</font>

<p>Syzygy works and is tested on reasonably modern versions of 
Linux, Windows, Mac OS X, and Irix, as outlined <a href="Testing.html">here</a>, a 
document every user should read. In general, you'll want to look at the 
<a href="SupportingLibraries.html">chapter</a> on installing supporting libraries for 
Syzygy compilation.

<p>If you are downloading and using the precompiled binaries/API, you can simply
look at the list of Syzygy software <a href="#Packages">packages</a>
to familiarize yourself with what is available and then proceed to 
this <a href="#OSEasyInstructions">section</a>
to install the binaries. If you are building the software yourself, start reading 
this chapter from the beginning. You will only need to read about compiling the
Python bindings if you will be building them for running Python programs.

<p>Finally, once you've gotten familiar with the basic build process, you might
want to explore the advanced Makefile targets supported by the Syzygy build structure.
One use of these <a href="#AdvancedTargets">targets</a> is creating the
binary installable szg packages.

<p>
<ul>
<li><A HREF="#Packages">Software Packages</a>
<li><A HREF="#OSEasyInstallation">OS-Specific Precompiled Install Instructions</a>
<li><A HREF="#OSBuildInstructions">OS-Specific Build Instructions</a>
<li><A HREF="#BuildEnvVar">Syzygy Build Environment Variables</a>
<li><A HREF="#SupportLibs">Installing Supporting Libraries</a>
<li><A HREF="#CompileSyzygy">Compiling the Syzygy Library</a>
<li><A HREF="#CompileDemos1">Compiling the Sample Applications in szg</a>
<li><A HREF="#CompileDemos2">Compiling the Sample Applications in szgdemo</a>
<li><A HREF="#CompilePythonBindings">Compiling the Syzygy Python Bindings</a>
<li><A HREF="#AdvancedTargets">Advanced Makefile Targets</a>
</ul>

<A NAME="Packages">
<p><font size=+2>Software Packages</font>
</a>

<p>The following software (and data) packages are part of the Syzygy distribution:
<p><ul>
<li>szg-0.7.tar.gz: Everything necessary to build and test the library. Includes
sample applications. See <a href="ExampleCode.html">here</a> for information about
running them.
<li>szgdemo-0.7.tar.gz: Additional sample applications. These are described
<a href="ExampleCode.html">here</a>. 
<li>szgdata-0.7.tar.gz: Data necessary for the sample applications, as outlined
<a href="ExampleCode.html">here</a>, but excluding some particularly large files,
which are available by request.
<li>py-szg-0.7.tar.gz: Python bindings for Syzygy.
<li>pycube-0.7.tar.gz: Sample Python Syzygy programs.
<li>szg-0.7-linux.tar.gz: Precompiled Linux version of the Syzygy API.
<li>external-0.7-linux.tar.gz: External libraries and headers used to produce
the executables.
<li>szg-0.7-win32.tar.gz: Precompiled Win32 version of the Syzygy API.
<li>external-0.7-win32.tar.gz: External libraries and headers used to produce
the executables.
<li>szg-0.7-darwin.tar.gz: Precompiled Mac OS X version of the Syzygy API.
<li>external-0.7-darwin.tar.gz: External libraries and headers used to produce
the executables.
<li>szg-0.7-sgi.tar.gz: Precompiled SGI version of the Syzygy API.
<li>external-0.7-sgi.tar.gz: External libraries and headers used to produce 
the executables.
<li>szg_app_template.tar.gz: A cross-platform build structure for C++ projects.
</ul>

<A NAME="OSEasyInstructions">
<p><font size=+2>OS-Specific Precompiled Install Instructions</font>
</a>

<p>For all platforms, unpack the precompiled distribution to a directory szg-0.7.
To run Syzygy programs you will need to, assuming that $SZGHOME is the location
of the new directory:

<p><ul>
<li>Linux: Add $SZGHOME/bin to the front of your $LD_LIBRARY_PATH and $PATH. 
By setting your dynamic library search path, you enable the runtime linker to
find the Syzygy shared libaries.
<li>Win32: Add $SZGHOME/bin to your $PATH variable.
<li>Mac OS X: Add $SZGHOME/bin to the front of your $DYLD_LIBRARY_PATH and $PATH.
<li>Irix: Add $SZGHOME/bin to the front of your $LD_LIBRARYN32_PATH and $PATH.
</ul>


<A NAME="OSBuildInstructions">
<p><font size=+2>OS-Specific Build Instructions</font>
</a>

<p>Linux: 
<p><ol>
<li>X11 and ncurses development packages are required for compilation. Your distribution
  might not install these by default.
<li>GLUT is required for compilation as well. Either install a GLUT development
  package via your distribution or install GLUT in Syzygy's external build 
  libraries, as described <a href="SupportingLibraries.html">here</a>.
<li>IMPORTANT NOTE: the Syzygy build environment produces code for the i686 architecture
  by default.If you have an older processor, you need to change the "-march=i686" flag in
  szg/build/make/Makefile.vars. Experiment with either removing it or 
  downgrading, for instance to "-march=i586".
</ol>

<p>Windows: 

<p><ol>
<li>Syzygy's build system uses GNU make and the command line Visual Studio
  compiler and linker. This has been tested with Visual Studio 6.0 (in combination
  with STLPort) and Visual Studio .Net.
<li>You will need a unix-like shell for Windows that provides a GNU make utility. We
  have tested two, MinGW/MSYS and Cygwin. If you're not currently using either (and
  are not using Windows 98, see below), we recommend MinGW. Cygwin is a much larger package, 
  comprising an entire Unix system, and is only available via a network installer. 
  On the other hand, MinGW is relatively small and comes as two self-contained installers.
<li>Syzygy programs expect to be able to scrape their name from the command-line args.
  The Windows NT, Windows 2000, and Windows XP (cmd.exe) shells all work.
  Unfortunately, the Win98 cmd.exe shell mangles argv[0], interfering with Syzygy's 
  proper operation. The cygwin shell does, however, work with Syzygy on all Windows
  versions, including Windows 98. Consequently, we recommend using installing and
  using the cygwin shell on Windows 98.
<li>To install MinGW, run the MinGW installer first (which gives you the underlying 
  system) and then the MSYS installer (which gives you the Unix-like shell needed to run
  the commands).  Please note, the MSYS shell, as of this writing, has a hard time
  outputing text from Syzygy programs. Consequently, we recommend running Syzygy commands
  from a regular Windows shell (cmd.exe) and only compiling in MSYS. This workaround means
  that MinGW is unsuitable for Win98, where cygwin should be used instead.
<li>You might prefer to install cygwin (<a href="http://www.cygwin.com/">www.cygwin.com</a>)
  if you want more Unix functionality from the command line than MinGW provides. You can
  create a minimum-disk-space Cygwin which will still build Syzygy by 
  selecting only these packages (uncheck <i>all</i> other checkboxes):
    <dl>
    <dt>Category: Base
        <dd>ash bash cygwin fileutils login sh-utils
    <dt>Category: Devel
        <dd>bin-utils make
    <dt>Category: Shells
        <dd>ash bash sh-utils
    </dl>
<li>Install MS Visual Studio. If you are using Visual Studo 6, you'll also need STLport
  to replace VC-6's non-threadsafe STL. With Visual Studio .NET (i.e. 7), STLport is not
  necessary. Consequently, we recommend Visual Studio .NET for Syzygy compilation.
  Please see <a href="SupportingLibraries.html">here</a> for instructions. 
<li>To compile from the command-line, Visual Studio needs several enviroment variables 
  to be set appropriately. Please see <a href="VisualStudioBuildVars.html">here</a>
  for details.
<li>You will need to install GLUT, as described in the Windows section of this 
  <a href="SupportingLibraries.html">chapter</a>. Please note that, in the past,
  we encouraged users to install the glut headers and library in the Visual Studio 
  directory. While this is still possible, the prefered Syzygy way is to install it in
  a known, external location.
<li>Launch a (MSYS or Cygwin) shell. Try running cl.exe (the compiler), link.exe 
  (the linker), and make. If these all run, you can begin compiling.
</ol>

<p>Mac OS X: 
<p>The Syzygy shared library code uses dlopen, as is provided in 
  szg/contrib/dlcompat. You must compile this first:
<p><ul>
<li> cd szg/contrib/dlcompat
<li> make
</ul>

<p>Irix: 
<p>Either install GLUT on your machine in the normal Unix way or follow the 
SGI instructions <a href="SupportingLibraries.html">here</a> to install
GLUT in a Syzygy-specific way, which does not require "root".

<a NAME="BuildEnvVar">
<p><font size=+2>Syzygy Build Environment Variables</font>
</a>

<p>The Syzygy build process uses recursive make. A top-level Makefile in
szg/build guesses the operating system and executes a machine-specific Makefile
in a subdirectory. For instance, on a Windows machine, the Syzygy shared library
libarLanguage.dll would be built in szg/build/win32/language, but, on a Linux
system, libarLanguage.so would be built in
szg/build/linux/language. The Makefile guesses the operating system
via uname, defaulting to the OSTYPE environment variable if this fails. 
If the top-level makefile fails to guess your machine type, you can fix the 
problem by setting $OSTYPE (to "linux" or "cygwin", for instance).

<p>To build Syzygy, You MUST set SZGHOME to the top-level Syzygy install
directory. You will probably also want to set SZGBIN, which lets you
designate the directory where executables and shared libraries will be installed,
and SZGEXTERNAL, which points to the installed location of external libraries
(see <a href="SupportingLibraries.html">here</a>), but setting these variables
is optional. 

<p>On Windows, when setting directories with these environment variables
  <i>use forward slashes instead of backslashes</i> and do NOT use the cygwin
  abbreviations "/cygdrive/d" or "/d" for "d:". Otherwise, the shell/compiler
  combination will misinterpret them. For example, you should use:
<pre>
  SZGHOME=D:/szg
  SZGEXTERNAL=g:/public
</pre>

<p>The following environment variables are meaningful on all systems:

<p><ul>
<li>SZGHOME: (required) The top-level syzygy directory 
  (for instance, /home/user1/szg).
<li>SZGBIN: (optional) The directory where the built binaries and shared libraries
  should be placed. If this is not set it defaults to
  szg/bin/$(MACHINE_TYPE), where MACHINE_TYPE is one of linux, win32, darwin,
  mips3, or mips4. The last two possibilities refer to SGI processor families.
<li>SZGEXTERNAL: (optional) The location of external
  libraries, such as those providing sound. If this is not set, 
  the code will compile but disable support for such features.
  The arrangement of the 
<li>SZGDEBUG: (optional) If set to "TRUE", a debug build will be produced.
<li>SZG_DEVELOPER_STYLE: (optional) If set to "EASY", the build assumes that the
  Syzygy headers and libraries are arranged as in one of the precompiled
  binary distributions, such as szg-0.7-linux.tar.gz. See 
  <a href="Programming.html">this</a> chapter for further information.
  Please note, by default the code assumes that the Syzygy headers and
  libraries are arranged as in the "developer" version (szg-0.7.tar.gz) you
  compile yourself.
<li>SZG_MULTITEX: (optional) Some platforms (especially recent Linux distributions) 
  do not support the multitexturing tricks of the q33 demo. Set this to "FALSE" to
  let q33 compile on those platforms.
</ul>

<p>The following environment variables only have meaning on Windows.
<p><ul>
<li>SZG_STLPORT: (optional) Visual Studio 6's STL implementation is insufficent to
  run Syzygy. In this case, STLport must be dropped in. To do so, set this
  environment variable to "TRUE". Please note, the default is NOT to try to
  use STLport. We assume that most users will be on Visual Studio .NET.
<li>SZG_USE_PCH: (optional) To get the Windows build reasonably fast, precompiled headers
  must be used (the default). However, these are extremely sensitive 
  to minor differences in Visual Studio patch level. Consequently, sometimes it is 
  convenient to be able to turn off precompiled headers by setting this variable to "FALSE".
</ul>

<A NAME="CompileSyzygy">
<p><font size=+2>Compiling the Syzygy Library</font> 
</a>

<p>Make sure you have followed the following specific guidelines for your
   platform (if any):
<p><ul>
<li>Windows: 
  <ol>
  <li>If using Visual Studio 6, you must install STLport as outlined 
      <a href="SupportingLibraries.html">here</a>, and SZG_STLPORT must be
      set to "TRUE".
  <li>If using Visual Studio .NET, do NOT use STLport. SZG_STLPORT must
      be unset or "FALSE".
  <li>Remember to set paths appropriately as outlined 
      <a href="#BuildEnvVar">here</a>, specifically like "d:/szg".
  </ol>
<li>Irix: Be sure to use "gmake" instead of "make", since Syzygy Makefiles
    follow the GNU syntax.
</ul>

<p><ol>
<li>Unpack szg.tar.gz.
<li>You MUST set $SZGHOME appropriately and
    should optionally set other variables (<a href="#BuildEnvVar">see here</a>).
<li>In szg/build, type "make". Note that "make clean" does the expected thing.
    On Windows this must be done from a cygwin or MinGW shell since syzygy uses GNU make.
    On Irix, you MUST use "gmake" instead of "make", since Syzygy uses GNU make syntax.
<li>If the supporting libraries are not properly installed 
    (see <a href="SupportingLibraries.html">here</a>), then Syzygy will build, but 
    certain capabilities, such as sound, will be disabled.
</ol>

<p>Potential problems:

<p><ul>
<li>If SZGBIN is set but isn't a directory, the cp command at the
    end of each step in the recursive make will fail.
<li>On most systems, the build system will automatically guess the
    system type and proceed. But if the build fails with
    "Makefile failed to guess OS type", manually set the environment variable 
    OSTYPE to one of linux, cygwin, darwin, or irix and try again.
<li>If cygwin was not installed properly, you might not have gotten "make"
    or "ar". In this case, the build will fail, complaining that it can't find
    the relevant executable. Please try installing cygwin again, this time
    making sure the packages mentioned <a href="#OSBuildInstructions">here</a>
    are included.
</ul>

<p>This process will build a collection of shared libraries that collectively
comprise the Syzygy toolkit (shown here with Linux/Irix extensions):

<p><ul>
<li>libarLanguage.so
<li>libarPhleet.so
<li>libarBarrier.so
<li>libarMath.so
<li>libarDrivers.so
<li>libarGraphics.so
<li>libarSound.so
<li>libarObject.so
<li>libarInteraction.so
<li>libarFramework.so
</ul>

<p>It will also compile a collection of plugins for the input framework (for instance
various device drivers), infrastructure programs like szgserver, and utility programs like
dkillall.

<p>You can also build individual shared libraries, which can be very convenient 
during development. To build the objects derived from src/language, for instance, 
run "make" (or "gmake" on
Irix) in the directory szg/build/$(MACHINE_TYPE)/language, where MACHINE_TYPE is
one of linux, win32, darwin, mips3, or mips4.

<A NAME="CompileDemos1">
<p><font size=+2>Compiling the Sample Applications in szg</font>
</a>

<p>Several demos are included with the Syzygy toolkit. The hope is that this
will make it easy to go from simply having a collection of networked 
computers to running cluster-based virtual reality applications in very little
time!
<p><ol>
<li>To build all the demos, in szg/build type "make demo".
   This also rebuilds the toolkit ("make") if needed.
   It continues on to the next demo if one fails to build.
   You can clean the demo directories with "make democlean". 
<li>Of special note in building the Quake III level viewer demo, q33: 
   On Unix (well, Linux at least), this
   will likely proceed without problems. On Windows, you will need to install
   some libraries and header files. In szg/contrib, you will find the
   jpeg and zlib directories. These contain source for libraries needed
   by the q33 demo. Check out the READMEs for which header files to copy
   over to the Microsoft VC++ include directory. Also copy
   the compiled libraries (instructions are in the READMEs) to 
   C:\Windows\System32. Note: the included code repositories build
   against multi-threaded libc. Libraries already existing on your Windows
   system might be built against single-threaded libc and, consequently,
   not be compatible with Syzygy. You'll also need to install the file
   glext.h with VC++'s other header files (but not in the GL subdirectory).
</ol>

<p>It is also possible to build the demos individually. For example, to build the "cosmos"
demo on a linux machine, go to

<pre>
  szg/build/linux/demo/cosmos
</pre>

and invoke make. As above, for this to work properly, SZGHOME, SZGBIN,
and SZGEXTERNAL must be set correctly.

<A NAME="CompileDemos2">
<p><font size=+2>Compiling the Sample Applications in szgdemo</font>
</a>

<p>Syzygy has a collection of demos that ship with the core distribution.
These are included not only to give downloaders something interesting to
do with their cluster right away but also to serve as a verfication base
as the library grows and changes. These demos will always be working as
the code base changes. However, the Syzygy project aims to distribute as
many demos as possible, even though it is not practical to include these
in the base distribution. Information about the demos found in the
2nd tier can be found <a href="Demos.html">here</a>.

<p><ul>
<li>Unpacking the additional demos: 
<a href="http://www.isl.uiuc.edu/syzygy/index.htm">Download</a>
or otherwise obtain the appropriate version szgdemo-X.X.tar.gz. Extract
to the directory szgdemo.
<li>Compiling additional libraries: One of the 2nd tier demos requires
the vmat library (a library for doing simple real-time physics). SZGHOME
needs to be set for this to work. 
<a href="http://www.isl.uiuc.edu/syzygy/index.htm">Download</a>
and unpack the source. Set VMATHOME to the top-level directory where
you unpacked the source. Go into vmat and type "make".
<li>Compiling the demos:
  <p><ul>
  <li>SZGHOME and SZGBIN must be set as outlined above. SZGEXTERNAL
  is optionally set (if you have some of the 3rd party supporting libraries).
  <li>In the top level of the szgdemo distribution, type "make". Your
  machine type is automatically detected and the various additional demos
  are built. The executables are placed in your SZGBIN directory.
  </ul>
</ul>

<A NAME="CompilePythonBindings">
<p><font size=+2>Compiling the Syzygy Python Bindings</font>
</a>

<A NAME="AdvancedTargets">
<p><font size=+2>Advanced Makefile Targets</font>
</a>

</body>
</html>
