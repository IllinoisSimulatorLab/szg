<html>
<head>
<title>Syzygy: Getting the Software</title>
</head>
<body bgcolor="#ffffff">
<a href="index.html">Documentation Index</a>

<p><font size=+2>Syzygy: Getting the Software</font>

<p>Syzygy works and is tested on reasonably modern versions of 
Linux, Windows, Mac OS X, and Irix, as outlined <a href="Testing.html">here</a>, a 
document every user should read. In general, you'll want to look at the 
<a href="SupportingLibraries.html">chapter</a> on installing supporting libraries for 
Syzygy compilation.

<p>If you are downloading and using the precompiled binaries/API, you can simply
look at the list of Syzygy software <a href="#Packages">packages</a>
to familiarize yourself with what is available and then proceed to 
this <a href="#OSEasyInstructions">section</a>
to install the binaries. If you are building the software yourself, start reading 
this section from the beginning.

<p>
<ul>
<li><A HREF="#Packages">Software Packages</a>
<li><A HREF="#OSEasyInstallation">OS-Specific Precompiled Install Instructions</a>
<li><A HREF="#OSBuildInstructions">OS-Specific Build Instructions</a>
<li><A HREF="#BuildEnvVar">Syzygy Build Environment Variables</a>
<li><A HREF="#VCCEnvVar">Visual C++ Command-Line Environment Variables</a>
<li><A HREF="#SupportLibs">Installing Supporting Libraries</a>
<li><A HREF="#CompileSyzygy">Compiling the Syzygy Library</a>
<li><A HREF="#CompileDemos">Compiling the Sample Applications in szg</a>
<li><A HREF="#InstallData">Compiling the Sample Applications in szgdemo</a>
</ul>

<A NAME="Packages">
<p><font size=+2>Software Packages</font>
</a>

<p>The following software (and data) packages are part of the Syzygy distribution:
<p><ul>
<li>szg-0.7.tar.gz: Everything necessary to build and test the library. Includes
sample applications. See <a href="ExampleCode.html">here</a> for information about
running them.
<li>szgdemo-0.7.tar.gz: Additional sample applications. These are described
<a href="ExampleCode.html">here</a>. 
<li>szgdata-0.7.tar.gz: Data necessary for the sample applications, as outlined
<a href="ExampleCode.html">here</a>, but excluding some particularly large files,
which are available by request.
<li>py-szg-0.7.tar.gz: Python bindings for Syzygy.
<li>pycube-0.7.tar.gz: Sample Python Syzygy programs.
<li>szg-0.7-linux.tar.gz: Precompiled Linux version of the Syzygy API.
<li>external-0.7-linux.tar.gz: External libraries and headers used to produce
the executables.
<li>szg-0.7-win32.tar.gz: Precompiled Win32 version of the Syzygy API.
<li>external-0.7-win32.tar.gz: External libraries and headers used to produce
the executables.
<li>szg-0.7-darwin.tar.gz: Precompiled Mac OS X version of the Syzygy API.
<li>external-0.7-darwin.tar.gz: External libraries and headers used to produce
the executables.
<li>szg-0.7-sgi.tar.gz: Precompiled SGI version of the Syzygy API.
<li>external-0.7-sgi.tar.gz: External libraries and headers used to produce 
the executables.
</ul>

<A NAME="OSEasyInstructions">
<p><font size=+2>OS-Specific Precompiled Install Instructions</font>
</a>

<p>For all platforms, unpack the precompiled distribution to a directory szg-0.7.
To run Syzygy programs you will need to, assuming that $SZGHOME is the location
of the new directory:

<p><ul>
<li>Linux: Add $SZGHOME/bin to the front of your $LD_LIBRARY_PATH and $PATH. 
By setting your dynamic library search path, you enable the runtime linker to
find the Syzygy shared libaries.
<li>Win32: Add $SZGHOME/bin to your $PATH variable.
<li>Mac OS X: Add $SZGHOME/bin to the front of your $DYLD_LIBRARY_PATH and $PATH.
<li>Irix: Add $SZGHOME/bin to the front of your $LD_LIBRARYN32_PATH and $PATH.
</ul>


<A NAME="OSBuildInstructions">
<p><font size=+2>OS-Specific Build Instructions</font>
</a>

<p>Linux: 
<p><ol>
<li>X11 and ncurses development packages are required for compilation. Your distribution
  might not install these by default.
<li>GLUT is required for compilation as well. Either install a GLUT development
  package via your distribution or install GLUT in Syzygy's external build 
  libraries, as described <a href="SupportingLibraries.html">here</a>.
<li>IMPORTANT NOTE: the Syzygy build environment produces code for the i686 architecture
  by default.If you have an older processor, you need to change the "-march=i686" flag in
  szg/build/make/Makefile.vars. Experiment with either removing it or 
  downgrading, for instance to "-march=i586".
</ol>

<p>Windows: 

<p><ol>
<li>Syzygy's build system uses GNU make and the command line Visual Studio
  compiler and linker. This has been tested with Visual Studio 6.0 (in combination
  with STLPort) and Visual Studio .Net.
<li>You will need a unix-like shell for Windows that provides a GNU make utility. We
  have tested two, MinGW/MSYS and Cygwin. If you're not currently using either (and
  are not using Windows 98, see below), we recommend MinGW. Cygwin is a much larger package, 
  comprising an entire Unix system, and is only available via a network installer. 
  On the other hand, MinGW is relatively small and comes as two self-contained installers.
<li>Syzygy programs expect to be able to scrape their name from the command-line args.
  The Windows NT, Windows 2000, and Windows XP (cmd.exe) shells all work.
  Unfortunately, the Win98 cmd.exe shell mangles argv[0], interfering with Syzygy's 
  proper operation. The cygwin shell does, however, work with Syzygy on all Windows
  versions, including Windows 98. Consequently, we recommend using installing and
  using the cygwin shell on Windows 98.
<li>To install MinGW, run the MinGW installer first (which gives you the underlying 
  system) and then the MSYS installer (which gives you the Unix-like shell needed to run
  the commands).  Please note, the MSYS shell, as of this writing, has a hard time
  outputing text from Syzygy programs. Consequently, we recommend running Syzygy commands
  from a regular Windows shell (cmd.exe) and only compiling in MSYS. This workaround means
  that MinGW is unsuitable for Win98, where cygwin should be used instead.
<li>You might prefer to install cygwin (<a href="http://www.cygwin.com/">www.cygwin.com</a>)
  if you want more Unix functionality from the command line than MinGW provides. You can
  create a minimum-disk-space Cygwin which will still build Syzygy by 
  selecting only these packages (uncheck <i>all</i> other checkboxes):
    <dl>
    <dt>Category: Base
        <dd>ash bash cygwin fileutils login sh-utils
    <dt>Category: Devel
        <dd>bin-utils make
    <dt>Category: Shells
        <dd>ash bash sh-utils
    </dl>
<li>Install MS Visual Studio. If you are using Visual Studo 6, you'll also need STLport
  to replace VC-6's non-threadsafe STL. With Visual Studio .NET (i.e. 7), STLport is not
  necessary. Consequently, we recommend Visual Studio .NET for Syzygy compilation.
  Please see <a href="SupportingLibraries.html">here</a> for instructions. 
<li>To compile from the command-line, Visual Studio needs several enviroment variables 
  to be set appropriately. Please see <a href="VisualStudioBuildVars.html">here</a>
  for details.
<li>You will need to install GLUT, as described in the Windows section of this 
  <a href="SupportingLibraries.html">chapter</a>. Please note that, in the past,
  we encouraged users to install the glut headers and library in the Visual Studio 
  directory. While this is still possible, the prefered Syzygy way is to install it in
  a known, external location.
<li>Launch a (MSYS or Cygwin) shell. Check that the PATH environment variable includes
  the directory containing cl.exe and link.exe (the Visual Studio compiler
  and linker). Directories containing dll's used
  by the compiler and linker will also need to be in the BIN path.
</ol>

<p>Mac OS X: GLUT is already installed so things will compile out of the box.
   Note that early versions of Mac OS 10.2 have difficulty launching OpenGL windows
   from the command line (the launched window might not be able to get
   keyboard focus). Consequently, at least version 10.2.5 is recommended. 
   The only additional library supported is fmod (though it might be easy to get others
   to work). One important note, however. Since the source uses dlopen,
   you need to compile szg/contrib/dlcompat. This is a simple:

<p><ul>
<li> cd szg/contrib/dlcompat
<li> make
</ul>

<p>Irix: Unfortunately, the code is unstable on Irix due to the difficulty of 
  finding a thread-safe compiler/libc combo. Any help here would be appreciated!
  However, you will, at least, be able to try the software.

<a NAME="BuildEnvVar">
<p><font size=+2>Syzygy Build Environment Variables</font>
</a>

<p>The Syzygy build process uses recursive make. A top-level Makefile in
szg/build guesses the operating system and then executes the appropriate
Makefiles. For instance, there are both szg/build/win32/language and 
szg/build/linux/language directories. On a Windows machine, the Makefile in 
the first directory is executed. The Makefile guesses the operating system
via uname, defaulting to the OSTYPE environment variable if this fails. 
If the top-level makefile fails to guess your machine type, you can fix the 
problem by setting the OSTYPE (to "linux" or "cygwin", for instance).

<p>Several environment variables should be set to tell the makefiles
where certain things are. You MUST set SZGHOME. SZGEXTERNAL is 
optional (but needed
if you want to use any of the additional libraries). SZGBIN is also optional.
If you want to do a debug build on Linux or Win32, SZGDEBUG must be
set to TRUE. By default, a non-debug build is produced. 

<p>Syzygy also uses two environment variables, SZGUSER and SZGCONTEXT,
to route internal communications to programs. Their use is explained below.
<p><ul>
<li>SZGHOME: required. The top-level syzygy directory 
  (for instance, /home/user1/szg).
<li>SZGBIN: optional. Where to put the binaries.  
  If this is not set it defaults to
  szg/bin/$(MACHINE_TYPE), where MACHINE_TYPE is one of linux, win32, darwin,
  mips3, or mips4. (These last two refer to SGI processor families.)
<li>SZGEXTERNAL: optional. The location of external
  libraries like sound and motion tracking. If this is not set,
  the code will compile but disable support for such features.
  Libraries are expected to be in subdirectories of $(SZGEXTERNAL)/lib,
  headers in subdirectories of $(SZGEXTERNAL)/include.
<li>SZGDEBUG: optional. If set to "TRUE", a debug build will be produced.
<li>SZGUSER: internal usage only. If this is set, a Syzygy component will
  attempt to run under the identity of user $(SZGUSER).
<li>SZGCONTEXT: internal usage only. This variable records the "context"
  under which a component attempts to execute.For instance, SZGCONTEXT
  encodes which virtual computer will be used, the particular virtual
  screen (i.e. SZG_SCREEN(n)), etc.
</ul>

<p>In Windows, <i>use forward slashes instead of backslashes</i> (otherwise
the VC++ compiler doesn't understand what the GNU makefile tells it).
For example:
<pre>
  SZGHOME=D:/szg
  SZGEXTERNAL=g:/public
</pre>
Also use drive letters ("D:/...") instead of the Cygwin abbreviations
"/cygdrive/d/..." or "/d/...", so the latter aren't misinterpreted as
MSDOS-style slash-delimited options.  Isn't multiplatform wonderful.

<A NAME="VCCEnvVar">
<p><font size=+2> Visual C++ Command-Line Environment Variables</font>
</a>

<p>The Windows build environment invokes the VC++ tools from the command line,
via GNU make and the Cygwin shell. If you haven't set up VC++ to 
run from the command line, compiling will fail. Possible error messages 
include not being able to find cl.exe (the compiler) and the linker not
finding required dll's. Here are the settings for the
environment variables include, lib, MSDevDir, and path that work with
a standard install of Visual Studio 6.0.

<pre>
include
  C:\Program Files\Microsoft Visual Studio\VC98\atl\include;
  C:\Program Files\Microsoft Visual Studio\VC98\mfc\include;
  C:\Program Files\Microsoft Visual Studio\VC98\include

lib
  C:\Program Files\Microsoft Visual Studio\VC98\mfc\lib;
  C:\Program Files\Microsoft Visual Studio\VC98\lib

MSDevDir
  C:\Program Files\Microsoft Visual Studio\Common\MSDev98

path
  C:\Program Files\Microsoft Visual Studio\Common\Tools\WinNT;
  C:\Program Files\Microsoft Visual Studio\Common\MSDev98\Bin;
  C:\Program Files\Microsoft Visual Studio\Common\Tools;
  C:\Program Files\Microsoft Visual Studio\VC98\bin
</pre>

<p>The following work with a standard install of Microsoft Visual
Studio .NET 2003.  (In Windows XP, it helps if these are "user variables"
rather than "system variables" -- the Cygwin shell inherits values from
the former.)

<pre>
include
  C:\Program Files\Microsoft Visual Studio .NET 2003\Vc7\ATLMFC\INCLUDE;
  C:\Program Files\Microsoft Visual Studio .NET 2003\Vc7\INCLUDE;
  C:\Program Files\Microsoft Visual Studio .NET 2003\Vc7\PlatformSDK\include

lib
  C:\Program Files\Microsoft Visual Studio .NET 2003\Vc7\ATLMFC\Lib;
  C:\Program Files\Microsoft Visual Studio .NET 2003\Vc7\PlatformSDK\Lib;
  C:\Program Files\Microsoft Visual Studio .NET 2003\Vc7\Lib

path
  C:\Program Files\Microsoft Visual Studio .NET 2003\Common7\IDE;
  C:\Program Files\Microsoft Visual Studio .NET 2003\Vc7\BIN;
  C:\Program Files\Microsoft Visual Studio .NET 2003\Common7\Tools;
  C:\Program Files\Microsoft Visual Studio .NET 2003\Common7\Tools\bin
</pre>



<A NAME="CompileSyzygy">
<p><font size=+2>Compiling the Syzygy Toolkit</font> 
</a>

<p><ol>
<li>Unpack szg.tar.gz.
<li>In szg/build, type make. Note that 'make clean' does the expected thing.
    On Windows this must be done from a cygwin shell since syzygy uses GNU make.
<li>If you get compile or link errors, you may need to modify szg/build/make/Makefile.defines.
    A common cause of this is a nonstandard location of OpenGL headers and libraries.
    But this is relatively rare.
<li>If fmod is not installed, Syzygy will build
    but sound will be disabled. Similarly, support for the Flock of Birds, Motion Analysis
    motion trackers, or importing 3D Studio Max models will be disabled if the
    appropriate libraries and headers are not found at compile-time, as
    outlined above.
</ol>

<p>Common problems:

<p><ul>
<li>If SZGBIN is set but isn't a directory, the cp command at the
    end of each step in the recursive make will fail.
<li>On most systems, the build system will automatically guess the
    system type and proceed.
    But if a top-level build fails with
    "Makefile failed to guess OS type"
    then manually set the environment variable 
    OSTYPE to one of linux, cygwin, darwin, or irix.
<li>If cygwin was not installed properly, you might not have gotten "make"
    or "ar". In this case, the build will fail, complaining that it can't find
    the relevant executable. Please try installing cygwin again, this time
    with a customized install including these components.
</ul>

<p>You can also build individual directories, which can be very convenient during development.
To build the objects derived from src/language, for instance, run make in
the directory szg/build/$(MACHINE_TYPE)/language, where MACHINE_TYPE is
one of linux, win32, darwin, mips3, or mips4. For this to work, the environment
variables SZGHOME, SZGBIN, and SZGEXTERNAL must be set appropriately.

<A NAME="CompileDemos">
<p><font size=+2>Compiling the demos</font>
</a>

<p>Several demos are included with the Syzygy toolkit. The hope is that this
will make it easy to go from simply having a collection of networked 
computers to running cluster-based virtual reality applications in very little
time!
<p><ol>
<li>To build all the demos, in szg/build type "make demo".
   This also rebuilds the toolkit ("make") if needed.
   It continues on to the next demo if one fails to build.
   You can clean the demo directories with "make democlean". 
<li>Of special note in building the Quake III level viewer demo, q33: 
   On Unix (well, Linux at least), this
   will likely proceed without problems. On Windows, you will need to install
   some libraries and header files. In szg/contrib, you will find the
   jpeg and zlib directories. These contain source for libraries needed
   by the q33 demo. Check out the READMEs for which header files to copy
   over to the Microsoft VC++ include directory. Also copy
   the compiled libraries (instructions are in the READMEs) to 
   C:\Windows\System32. Note: the included code repositories build
   against multi-threaded libc. Libraries already existing on your Windows
   system might be built against single-threaded libc and, consequently,
   not be compatible with Syzygy. You'll also need to install the file
   glext.h with VC++'s other header files (but not in the GL subdirectory).
</ol>

<p>It is also possible to build the demos individually. For example, to build the "cosmos"
demo on a linux machine, go to

<pre>
  szg/build/linux/demo/cosmos
</pre>

and invoke make. As above, for this to work properly, SZGHOME, SZGBIN,
and SZGEXTERNAL must be set correctly.

<A NAME="InstallData">
<p><font size=+2>Installing the Optional Data Distribution</font>
</a>

<p>Many of the <a href="Demos.html">demos</a> require additonal data files to run.
Previous versions of Syzygy have included an optional data distribution as a gzip-ed
tar file. This file has grown too large to be useful. Instead, the data for the
demos is now distributed on the Syzygy DVD, which can be obtained by writing the
<A href="www.isl.uiuc.edu">Integrated Systems Lab</a> (just follow the links to Syzygy
from the lab's main page). To install the data, you will simply copy the 'data'
folder from the top level of the DVD to your desired location.

<p>Once the data is installed, set the following parameter in
the Syzygy database (discussed below) for each machine that will be accessing the data.
Of course, you will point to the actual location of the 'data' directory, instead of
'/szg/data'.

<pre>
 XXX SZG_DATA path /szg/data
</pre>

<p>This sets the "path" parameter of the SZG_DATA parameter group on the machine named 
XXX to /szg/data. Now, the programs will be able to find their data.

<p>To install
the q33 demo, for example, you'll need to install pak0.pk3 (available from the Quake3 CD or
ID software demo download) into the data path. Either copy it into
the data directory you've already created, or copy it to an /arbitrary/location
and append to the data path:

<pre>
  XXX SZG_DATA path /szg/data;/arbitrary/location
</pre>

<A NAME="InstallDemos">
<p><font size=+2>Installing the 2nd Tier Demos</font>
</a>

<p>Syzygy has a collection of demos that ship with the core distribution.
These are included not only to give downloaders something interesting to
do with their cluster right away but also to serve as a verfication base
as the library grows and changes. These demos will always be working as
the code base changes. However, the Syzygy project aims to distribute as
many demos as possible, even though it is not practical to include these
in the base distribution. Information about the demos found in the
2nd tier can be found <a href="Demos.html">here</a>.

<p><ul>
<li>Unpacking the additional demos: 
<a href="http://www.isl.uiuc.edu/syzygy/index.htm">Download</a>
or otherwise obtain the appropriate version szgdemo-X.X.tar.gz. Extract
to the directory szgdemo.
<li>Compiling additional libraries: One of the 2nd tier demos requires
the vmat library (a library for doing simple real-time physics). SZGHOME
needs to be set for this to work. 
<a href="http://www.isl.uiuc.edu/syzygy/index.htm">Download</a>
and unpack the source. Set VMATHOME to the top-level directory where
you unpacked the source. Go into vmat and type "make".
<li>Compiling the demos:
  <p><ul>
  <li>SZGHOME and SZGBIN must be set as outlined above. SZGEXTERNAL
  is optionally set (if you have some of the 3rd party supporting libraries).
  <li>In the top level of the szgdemo distribution, type "make". Your
  machine type is automatically detected and the various additional demos
  are built. The executables are placed in your SZGBIN directory.
  </ul>
</ul>

</body>
</html>
