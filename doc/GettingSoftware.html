<html>
<head>
<title>Syzygy: Getting the Software</title>
</head>
<body bgcolor="#ffffff">
<a href="index.html">Documentation Index</a>

<p><font size=+2>Syzygy: Getting the Software</font>

<p>Syzygy works and is tested on reasonably modern versions of 
Linux, Windows, Mac OS X, and Irix, as outlined 
<a href="Testing.html">here</a>, a document every user should read. 
In general, you'll want to look at the 
<a href="SupportingLibraries.html">chapter</a> on installing supporting 
libraries for Syzygy compilation.

<p>Syzygy can be installed either as a source distribution or as a set of precompiled
libraries and executables (referred to hereafter as the "precompiled API").
If you are downloading and using the precompiled SDK, you can 
simply look at the list of Syzygy software <a href="#Packages">packages</a>
to familiarize yourself with what is available and then proceed to 
this <a href="#OSEasyInstructions">section</a>
to install the binaries. If you are building the software yourself, start 
reading this chapter from the beginning. You will only need to read about 
compiling the Python bindings if you will be building them for running Python 
programs.

<p>Finally, once you've gotten familiar with the basic build process, you might
want to explore the advanced Makefile targets supported by the Syzygy build 
structure. One use of these <a href="#AdvancedTargets">targets</a> is creating 
the binary installable szg packages.

<p>
<ul>
<li><A HREF="#Packages">Software Packages</a>
<li><A HREF="#OSEasyInstallation">OS-Specific Precompiled Install Instructions</a>
<li><A HREF="#OSBuildInstructions">OS-Specific Build Instructions</a>
<li><A HREF="#BuildEnvVar">Syzygy Build Environment Variables</a>
<li><A HREF="#SupportLibs">Installing Supporting Libraries</a>
<li><A HREF="#CompileSyzygy">Compiling the Syzygy Library</a>
<li><A HREF="#CompileDemos1">Compiling the Sample Applications in szg</a>
<li><A HREF="#CompileVMAT">Compiling the VMAT Physics Library</a>
<li><A HREF="#CompileDemos2">Compiling the Sample Applications in szgdemo</a>
<li><A HREF="#AdvancedTargets">Advanced Makefile Targets</a>
</ul>

<A NAME="Packages">
<p><font size=+2>Software Packages</font>
</a>

<p>The following software (and data) packages are part of the Syzygy 
distribution:
<p><ul>
<li>szg-0.7.tar.gz: Everything necessary to build and test the library. 
Includes sample applications. See <a href="ExampleCode.html">here</a> for 
information about running them.
<li>vmat-0.7.tar.gz: A real-time physics library. Used in one of the szgdemo
sample applications and includes an example of its own.
<li>szgdemo-0.7.tar.gz: Additional sample applications. These are described
<a href="ExampleCode.html">here</a>. 
<li>szgdata-0.7.tar.gz: Data necessary for the sample applications, as outlined
<a href="ExampleCode.html">here</a>, but excluding some particularly large 
files, which are available by request.
<li>py-szg-0.7.tar.gz: Python bindings for Syzygy.
<li>pycube-0.7.tar.gz: Sample Python Syzygy programs.
<li>szg-0.7-linux.tar.gz: Precompiled Linux version of the Syzygy SDK.
<li>external-0.7-linux.tar.gz: External libraries and headers used to produce
the executables.
<li>szg-0.7-win32-vc6.tar.gz: Precompiled Win32 version of the Syzygy SDK for
Visual Studio 6 plus STLport.
<li>szg-0.7-win32-vc7.tar.gz: Precompiled Win32 version of the Syzygy SDK for
Visual Studio 7.
<li>external-0.7-win32.tar.gz: External libraries and headers used to produce
the executables.
<li>szg-0.7-darwin.tar.gz: Precompiled Mac OS X version of the Syzygy SDK.
<li>external-0.7-darwin.tar.gz: External libraries and headers used to produce
the executables.
<li>szg-0.7-sgi.tar.gz: Precompiled SGI version of the Syzygy SDK.
<li>external-0.7-sgi.tar.gz: External libraries and headers used to produce 
the executables.
<li>szg_app_template.tar.gz: A cross-platform build structure for C++ projects.
</ul>

<A NAME="OSEasyInstallation">
<p><font size=+2>OS-Specific Precompiled SDK Install Instructions</font>
</a>

<p>Installing a precompiled SDK can be problematic since there are issues
of compatibility with system libraries and compilers. Our Linux precompiled
version (being compiled on Xandros 2) should work on a broad variety of modern 
Linux systems (like RedHat 9, RedHat Advanced Server, Xandros 3, among others),
but, would not, for instance, work on RedHat 8. On the Windows side, the issues
are somewhat less severe, since the precompiled executables should run on 
almost any version of Windows, no matter what is installed. However, problems
arise when you want to compile your own projects.
The Visual Studio 6 package is not compatible with Visual Studio .NET 
compilers and vice-versa.

<p>For all platforms, unpack the precompiled distribution to a directory 
szg-0.7. To run Syzygy programs you will need to, assuming that $SZGHOME is 
the location of the new directory:

<p><ul>
<li>Linux: Add $SZGHOME/bin to the front of your $LD_LIBRARY_PATH and $PATH. 
By setting your dynamic library search path, you enable the runtime linker to
find the Syzygy shared libaries.
<li>Win32: Add $SZGHOME/bin to your $PATH variable.
<li>Mac OS X: Add $SZGHOME/bin to the front of your $DYLD_LIBRARY_PATH and 
$PATH.
<li>Irix: Add $SZGHOME/bin to the front of your $LD_LIBRARYN32_PATH and $PATH.
</ul>

<p>In contrast to szg software you compile yourself, using the precompiled
SDK requires that you set the dynamic linker path on Unix-like systems. This
occurs because the search paths present at compile time will not be  
appropriate for the system where the precompiled libraries are installed.

<p>PLEASE NOTE: There are a variety of external (i.e. non-szg) shared
libraries embedded in the precompiled SDK. It is possible that these might
be incompatible with shared libraries installed on your system. Now, the
szg external shared libraries never leave the SDK directory, so your system is
unaffected EXCEPT by any changes you might make to (for instance) your
.bashrc to set environment variables as above. By changing the dynamic linker
search paths, you could cause other executables on your system to link
with inappropriate shared libraries and fail to operate properly.

<p>First of all, don't panic. See if it happens. It is, after all, easy to
change your environment variables back. If it turns out that you need
different dynamic linker settings to run szg and non-szg executables you can
either:

<p><ul>
<li>Compile the Syzygy library and executables yourself, taking care to
ensure that the process uses compatible library versions.
<li>Have a special shell that you execute to create a Syzygy shell. For
instance, how about the following (maybe called szg_shell.sh):

<pre>
   export PS1=\\r\\nSZG_SHELL:\\u@\\h:\\w\\r\\n::
   export LD_LIBRARY_PATH=$(SZGHOME)/bin
   export PATH=$(SZGHOME)/bin:the_rest_of_the_path
</pre>

This will make the shell prompt label "SZG_SHELL", along with setting the
path and the dynamic linker path, once you:

<pre>
  source szg_shell.sh
</pre>

</ul>

<A NAME="OSBuildInstructions">
<p><font size=+2>OS-Specific Build Instructions</font>
</a>

<p>Linux: 
<p><ol>
<li>X11 and ncurses development packages are required for compilation. 
  Your distribution might not install these by default.
<li>GLUT is required for compilation as well. Either install a GLUT development
  package via your distribution or install GLUT in Syzygy's external build 
  libraries, as described <a href="SupportingLibraries.html">here</a>.
<li>IMPORTANT NOTE: the Syzygy build environment produces code for the i686 
  architecture by default.If you have an older processor, you need to change 
  the "-march=i686" flag in szg/build/make/Makefile.vars. Experiment with 
  either removing it or downgrading, for instance to "-march=i586".
</ol>

<p>Windows: 

<p><ol>
<li>Syzygy's build system uses GNU make and the command line Visual Studio
  compiler and linker. This has been tested with Visual Studio 6.0 
  (in combination with STLPort) and Visual Studio .Net.
<li>You will need a unix-like shell for Windows that provides a GNU make 
    utility. We have tested two, MinGW/MSYS and Cygwin. If you're not 
    currently using either (and are not using Windows 98, see below), we 
    recommend MinGW. Cygwin is a much larger package, comprising an entire 
    Unix system, and is only available via a network installer. On the other 
    hand, MinGW is relatively small and comes as two self-contained installers.
<li>Syzygy programs expect to be able to scrape their name from the 
    command-line args. The Windows NT, Windows 2000, and Windows XP (cmd.exe) 
    shells all work. Unfortunately, the Win98 cmd.exe shell mangles argv[0], 
    interfering with Syzygy's proper operation. The cygwin shell does, however,
    work with Syzygy on all Windows versions, including Windows 98. 
    Consequently, we recommend using installing and using the cygwin shell on 
    Windows 98.
<li>To install MinGW, run the MinGW installer first (which gives you the 
    underlying system) and then the MSYS installer (which gives you the 
    Unix-like shell needed to run the commands).  Please note, the MSYS shell, 
    as of this writing, has a hard time outputing text from Syzygy programs. 
    Consequently, we recommend running Syzygy commands from a regular Windows 
    shell (cmd.exe) and only compiling in MSYS. This workaround means that 
    MinGW is unsuitable for Win98, where cygwin should be used instead.
<li>You might prefer to install cygwin 
    (<a href="http://www.cygwin.com/">www.cygwin.com</a>) if you want more 
    Unix functionality from the command line than MinGW provides. You can 
    create a minimum-disk-space Cygwin which will still build Syzygy by 
    selecting only these packages (uncheck <i>all</i> other checkboxes):
    <dl>
    <dt>Category: Base
        <dd>ash bash cygwin fileutils login sh-utils
    <dt>Category: Devel
        <dd>bin-utils make
    <dt>Category: Shells
        <dd>ash bash sh-utils
    </dl>
<li>Install MS Visual Studio. If you are using Visual Studo 6, you'll also 
    need STLport to replace VC-6's non-threadsafe STL. With Visual Studio .NET 
    (i.e. 7), STLport is not necessary. Consequently, we recommend Visual 
    Studio .NET for Syzygy compilation. Please see 
    <a href="SupportingLibraries.html">here</a> for instructions. 
<li>To compile from the command-line, Visual Studio needs several enviroment 
    variables to be set appropriately. Please see 
    <a href="VisualStudioBuildVars.html">here</a> for details.
<li>You will need to install GLUT, as described in the Windows section of this 
    <a href="SupportingLibraries.html">chapter</a>. Please note that, in the 
    past, we encouraged users to install the glut headers and library in the 
    Visual Studio directory. While this is still possible, the prefered Syzygy 
    way is to install it in a known, external location.
<li>Launch a (MSYS or Cygwin) shell. Try running cl.exe (the compiler), 
    link.exe (the linker), and make. If these all run, you can begin compiling.
</ol>

<p>Mac OS X: 
<p>The Syzygy shared library code uses dlopen, as is provided in 
  szg/contrib/dlcompat. You must compile this first:
<p><ul>
<li> cd szg/contrib/dlcompat
<li> make
</ul>

<p>Irix: 
<p>Either install GLUT on your machine in the normal Unix way or follow the 
SGI instructions <a href="SupportingLibraries.html">here</a> to install
GLUT in a Syzygy-specific way, which does not require "root".

<a NAME="BuildEnvVar">
<p><font size=+2>Syzygy Build Environment Variables</font>
</a>

<p>The Syzygy build process uses recursive make. A top-level Makefile in
szg/build guesses the operating system and executes a machine-specific Makefile
in a subdirectory. For instance, on a Windows machine, the Syzygy shared library
libarLanguage.dll would be built in szg/build/win32/language, but, on a Linux
system, libarLanguage.so would be built in
szg/build/linux/language. The Makefile guesses the operating system
via uname, defaulting to the OSTYPE environment variable if this fails. 
If the top-level makefile fails to guess your machine type, you can fix the 
problem by setting $OSTYPE (to "linux" or "cygwin", for instance).

<p>To build Syzygy, You MUST set SZGHOME to the top-level Syzygy install
directory. You will probably also want to set SZGBIN, which lets you
designate the directory where executables and shared libraries will be installed,
and SZGEXTERNAL, which points to the installed location of external libraries
(see <a href="SupportingLibraries.html">here</a>), but setting these variables
is optional. 

<p>On Windows, when setting directories with these environment variables
  <i>use forward slashes instead of backslashes</i> and do NOT use the cygwin
  abbreviations "/cygdrive/d" or "/d" for "d:". Otherwise, the shell/compiler
  combination will misinterpret them. For example, you should use:
<pre>
  SZGHOME=D:/szg
  SZGEXTERNAL=g:/public
</pre>

<p>The following environment variables are meaningful on all systems:

<p><ul>
<li>SZGHOME: (required) The top-level syzygy directory 
  (for instance, /home/user1/szg).
<li>SZGBIN: (optional) The directory where the built binaries and shared libraries
  should be placed. If this is not set it defaults to
  szg/bin/$(MACHINE_TYPE), where MACHINE_TYPE is one of linux, win32, darwin,
  mips3, or mips4. The last two possibilities refer to SGI processor families.
<li>SZGEXTERNAL: (optional) The location of external
  libraries, such as those providing sound. If this is not set, 
  the code will compile but disable support for such features.
  The arrangement of the 
<li>SZGDEBUG: (optional) If set to "TRUE", a debug build will be produced.
<li>SZG_DEVELOPER_STYLE: (optional) If set to "EASY", the build assumes that the
  Syzygy headers and libraries are arranged as in one of the precompiled
  binary distributions, such as szg-0.7-linux.tar.gz. See 
  <a href="Programming.html">this</a> chapter for further information.
  Please note, by default the code assumes that the Syzygy headers and
  libraries are arranged as in the "developer" version (szg-0.7.tar.gz) you
  compile yourself.
<li>SZG_MULTITEX: (optional) Some platforms (especially recent Linux distributions) 
  do not support the multitexturing tricks of the q33 demo. Set this to "FALSE" to
  let q33 compile on those platforms.
</ul>

<p>The following environment variables only have meaning on Windows.
<p><ul>
<li>SZG_STLPORT: (optional) Visual Studio 6's STL implementation is insufficent to
  run Syzygy. In this case, STLport must be dropped in. To do so, set this
  environment variable to "TRUE". Please note, the default is NOT to try to
  use STLport. We assume that most users will be on Visual Studio .NET.
<li>SZG_USE_PCH: (optional) To get the Windows build reasonably fast, precompiled headers
  must be used (the default). However, these are extremely sensitive 
  to minor differences in Visual Studio patch level. Consequently, sometimes it is 
  convenient to be able to turn off precompiled headers by setting this variable to "FALSE".
</ul>

<A NAME="CompileSyzygy">
<p><font size=+2>Compiling the Syzygy Library</font> 
</a>

<p>Make sure you have followed the following specific guidelines for your
   platform (if any):
<p><ul>
<li>Windows: 
  <ol>
  <li>If using Visual Studio 6, you must install STLport as outlined 
      <a href="SupportingLibraries.html">here</a>, and SZG_STLPORT must be
      set to "TRUE".
  <li>If using Visual Studio .NET, do NOT use STLport. SZG_STLPORT must
      be unset or "FALSE".
  <li>Remember to set paths appropriately as outlined 
      <a href="#BuildEnvVar">here</a>, specifically like "d:/szg".
  </ol>
<li>Irix: Be sure to use "gmake" instead of "make", since Syzygy Makefiles
    follow the GNU syntax.
</ul>

<p><ol>
<li>Unpack szg.tar.gz.
<li>You MUST set $SZGHOME appropriately and
    should optionally set other variables (<a href="#BuildEnvVar">see here</a>).
<li>In szg/build, type "make". Note that "make clean" does the expected thing.
    On Windows this must be done from a cygwin or MinGW shell since syzygy uses GNU make.
    On Irix, you MUST use "gmake" instead of "make", since Syzygy uses GNU make syntax.
<li>If the supporting libraries are not properly installed 
    (see <a href="SupportingLibraries.html">here</a>), then Syzygy will build, but 
    certain capabilities, such as sound, will be disabled.
</ol>

<p>Potential problems:

<p><ul>
<li>If SZGBIN is set but isn't a directory, the cp command at the
    end of each step in the recursive make will fail.
<li>On most systems, the build system will automatically guess the
    system type and proceed. But if the build fails with
    "Makefile failed to guess OS type", manually set the environment variable 
    OSTYPE to one of linux, cygwin, darwin, or irix and try again.
<li>If cygwin was not installed properly, you might not have gotten "make"
    or "ar". In this case, the build will fail, complaining that it can't find
    the relevant executable. Please try installing cygwin again, this time
    making sure the packages mentioned <a href="#OSBuildInstructions">here</a>
    are included.
<li>If you are using cygwin on Win32 and see the following error message:
<pre>
  link error: too many arguments
</pre>
    You should check the which executable you are running as the linker by typing
    "which link". It is very likely that it will report you are running a cygwin
    executable, whereas you should be running an executable in a Visual Studio
    directory. There are various solutions to this problem. One is to simply
    delete the cygwin executable, another is to change your $PATH environment
    variable (say via the .bashrc in your home directory that cygwin reads
    on start up) so that the Visual Studio directory comes first (see
    <a href="VisualStudioBuildVars.html">here</a> for details).
</ul>

<p>This process will build a collection of shared libraries that collectively
comprise the Syzygy toolkit (shown here with Linux/Irix extensions):

<p><ul>
<li>libarLanguage.so
<li>libarPhleet.so
<li>libarBarrier.so
<li>libarMath.so
<li>libarDrivers.so
<li>libarGraphics.so
<li>libarSound.so
<li>libarObject.so
<li>libarInteraction.so
<li>libarFramework.so
</ul>

<p>It will also compile a collection of plugins for the input framework (for instance
various device drivers), infrastructure programs like szgserver, and utility programs like
dkillall.

<p>You can also build individual shared libraries, which can be very convenient 
during development. To build the objects derived from src/language, for instance, 
run "make" (or "gmake" on
Irix) in the directory szg/build/$(MACHINE_TYPE)/language, where MACHINE_TYPE is
one of linux, win32, darwin, mips3, or mips4.

<A NAME="CompileDemos1">
<p><font size=+2>Compiling the Sample Applications in szg</font>
</a>

<p>Many sample applications are included with the Syzygy code, and they are
described <a href="ExampleCode.html">here</a>. The first group is
included in the base distribution itself, with code located at szg/src/demo.
The only sample application here that requires additional (external) libraries
to build is q33, a Quake III level viewer. However, you will not need to install
anything additional to build the rest.

<p><ol>
<li>atlantis
<li>avn
<li>coaster
<li>cosmos
<li>cubes
<li>hspace
<li>parade
<li>q33: Needs additional libraries to build.
<li>ribbons
<li>schprel
<li>timetunnel
<li>volume
</ol>

<p><ol>
<li>Make sure that SZGHOME, SZGBIN, SZGEXTERNAL, etc. are set-up as
   before.
<li>To build all the samples, in szg/build type "make demo", which will
   result in the executables being placed in $SZGBIN, if that environment
   variable has been set, and, otherwise, the default location. 
   The "demo" target also rebuilds the toolkit ("make") if needed.
   If one sample application fails to build, it continues to the next.
   You can clean the demo directories with "make demo-clean".
<li>To understand how to install the external libraries for building
   q33, go <a href="SupportingLibraries.html">here</a>.
</ol>

<p>It is also possible to build the demos individually. For example, to build the "cosmos"
demo on a Linux machine, go to

<pre>
  szg/build/linux/demo/cosmos
</pre>

and invoke make. As above, for this to work properly, the build environment
variables must be set appropriately.

<A NAME="CompileVMAT">
<p><font size=+2>Compiling the VMAT Physics Library</font>
</a>

<p><ol>
<li>VMAT stands for "virtual materials".
<li>Unpack vmat-X.X.tar.gz to the directory "vmat".
<li>The environment variables SZGHOME, SZGBIN, SZGEXTERNAL must be set as before.
<li>From the top level directory, "make" and "make clean"
do the expected thing. This builds the library libvmat.so (Linux/Irix suffix)
and the testvmat sample application. These are both copied into $SZGBIN, if
it is defined, and otherwise into the default location for executables.
<li>To enable other applications to use this library, set the environment
variable VMATHOME to the location of the vmat directory.
</ol>

<A NAME="CompileDemos2">
<p><font size=+2>Compiling the Sample Applications in szgdemo</font>
</a>

<p>The number of example applications included in the base distribution
is limited, with additional samples being included in the szgdemo
software package as they are developed.

<p><ol>
<li>bigpicture: Needs additional libraries to build.
<li>cubecake: Needs additional libraries to build.
<li>danceparty
<li>info-forest
<li>performance (contained in subdirectory internet2-02): Needs
    vmat to build (see <a href="#CompileVMAT">here</a>).
<li>landspeeder
<li>salamiman
<li>skyfly
<li>szglorenz
<li>VRMLView: Needs additional libraries to build.
<li>vtkfile: Needs additional libraries to build.
<li>warpeace
<li>zyspace
</ol>

<p><ol>
<li>Obtain the source distribution szgdemo-X.X.tar.gz and extract
to the directory szgdemo. 
<li>The build environment variables SZGHOME, SZGBIN, SZGEXTERNAL, etc.
need to be set as before. To build "performance", VMATHOME will need
to be set, as <a href="#CompileVMAT">here</a>.
<li>Go into szgdemo and type "make". This will build all the samples
for which needed libraries are present, with successfully built executables
going into $SZGBIN, if defined, and otherwise into the default location.
 If a sample will not build,
the make goes on to the next one. "make clean" does the expected thing.
<li>You can build an individual sample by entering its directory and typing
"make". 
</ol>

<A NAME="AdvancedTargets">
<p><font size=+2>Advanced Makefile Targets</font>
</a>

<p>There are a few additional Makefile targets that can be useful in specific
circumstances. These targets allow the user to create an installable SDK
and manage the external shared libraries.

<p><ul>
<li>create-sdk: This both occurs in every top level Makefile and in 
Makefile.rules (and consequently every low-level Makefile as well). When 
invoked from a developer's install of the szg source, it creates an SDK
installation in $SZGHOME/szg-install. All executables and shared libraries,
including the external libraries, are copied into the bin subdirectory and
symbolic links are created there to deal with library sonames, as required.
In addition, documentation, header files, and some of the make infratsructure
are copied over. Elsewhere (like in py-szg or szgdemo), create-sdk just 
causes locally produced binaries and libraries to be added to an existing
$SZGHOME/szg-install.
<li>clean-sdk: This exists in the top-level Makefile of the developer's version
of szg only. Removes the working SDK
installation, if such exists (i.e. deletes $SZGHOME/szg-install).
<li>install-shared: This target exists in every top level Makefile and in
Makefile.rules. It copies shared libraries into the binary directory (i.e.
$SZGBIN).
<li>bin-install: This target exists in every top level Makefile and in 
Makefile.rules. It copies a project's compiled binaries and libraries into
the binary directory ($SZGBIN).
<li>install-pch: This target only has meaning when using a Windows version of
the SDK. By default, compiling with the SDK has precompiled headers turned
off, resulting in slower compilation on Windows. If you wish to use 
precompiled headers to speed up compilation, you will need to execute this
target from the build directory of the SDK. Afterwards, you can turn on
precompiled headers by setting environment variable SZG_USE_PCH to TRUE.
<li>clean-pch: This target only has meaning when using a Windows version of
the SDK. It deletes the precompiled header file created by the install-pch
target.
</ul>
<hr>

</body>
</html>
