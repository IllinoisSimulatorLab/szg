<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Syzygy Supported Input Devices</title>
</head>
<body style="background-color: rgb(255, 255, 255);">
<p><a href="index.html">Documentation Index</a> </p>
<p><a href="InputDevices.html">Input Devices</a><br>
<br>
<font size="+2">Syzygy Supported Input Devices</font> </p>
<p>Most input devices get their real-time data served up to other
Syzygy nodes through a single executable, DeviceServer. DeviceServer is
invoked with on command-line argument containing the name of the device
driver to use and with a slot number that determines the name of
the service offered:<br>
</p>
<pre>DeviceServer [driver_name] [driver_slot]</pre>

<p>Roughly speaking, if driver_slot is set to 2, then the DeviceServer
will offer a service with name SZG_INPUT2. Only one service can
be offered at a given time with a particular name, so different slots
are used to allow different input devices to exist in the system
simultaneously. Note that, by default, the syzygy applications will
be attempting to connect to the SZG_INPUT0 service.
To find out more specifics about service names and
connection brokering, please see the chapter of 
<a href="ConfigurationExamples.html">configuration examples</a>.

<p>Some devices have additional parameters associated with them, as
for configuration. These parameters are stored in the database via
a <span style="font-style: italic;">service name</span>, corresponding to a
group of Syzygy database parameters (e.g. SZG_JOYSTICK for joystick
devices). On the DeviceServer computer, this group will contain
parameters needed to configure the device. &nbsp;</p>

<p>The DeviceClient executable can be used to test a DeviceServer. It
takes one command-line argument, the driver slot associated with the
DeviceServer to which it wishes to connect. Run: </p>
<pre>DeviceClient [driver_slot]<br></pre>
<p>You should see a print-out of the device's input state, updated 10
times a second.<br>
</p>
<p>The rest of this file is a list of supplied input device drivers,
beginning with the input simulator program <span
 style="font-style: italic;">wandsimserver</span>.<br>
</p>
<hr>
<p><font size="+2">wandsimserver</font> </p>
<p><img align="right" src="wandsimserver.gif">Platform:
All platforms.<br>
Service: none<br>
</p>
<p> This VR interface emulates a 6DOF tracker + joystick (with tracking
sensors attached to head and joystick) with mouse and keyboard. Keys 1
through 7 activate its various modes: </p>
<ol>
  <li> Translate head <br>
To move head in different directions, move mouse with left or middle
button depressed.      The yellow wireframe sphere moves around as
confirmation. </li>
  <li> Rotate head <br>
To rotate head, move mouse with left or middle button depressed. The
blue eyes with red pupils indicate which direction the head is facing. </li>
  <li> Translate wand <br>
Like translating head. </li>
  <li> Translate wand + buttons <br>
The three mouse buttons activate the wand's three buttons (the red dots
here on the      screenshot become green to confirm activation). Moving
the mouse always moves      the wand, even if no buttons are depressed. </li>
  <li> Rotate wand + buttons <br>
Like "Translate wand + buttons."  The magenta ball indicates which
direction the wand is pointing. </li>
  <li> Use joystick <br>
To move the wand's joystick, move mouse with left button depressed. The
dot in the square moves around to confirm motion. </li>
  <li> Rotate World <br>
To rotate the world about a vertical axis, move the mouse sideways. </li>
</ol>
<hr><font size="+2">Simple Devices<br>
</font><br>
The following are device drivers that interface with a single hardware
device. IMPORTANT: In general, for examples which require parameters, substitute
the name of the computer on which you will be running DeviceServer for
"TRACKER_COMPUTER".<br>
<hr><br>
<font size="+1">Joystick<br>
<br>
</font>
<p>Command: DeviceServer arJoystickDriver [driver_slot]<br>
Platform: Linux and Windows.<br>
Service: none<br>
</p>
<p>Run this on a host with a joystick attached. Linux hosts use the
joystick device /dev/js0.  Win32 hosts use the default DirectInput
joystick. JoystickServer's data is in the format of 20 buttons and 20
axes, accessed through an arJoystickClient object. </p>
<p><br>
</p>
<hr><br>
<font size="+1">Intel Wireless Gamepad<br>
</font><br>
<p>Command: DeviceServer arIntelGamepadDriver [driver_slot]<br>
Platform: Windows.<br>
Service: none<br>
</p>
<p>Run this on a Win32 host with an Intel Wireless Series Gamepad
attached. GamepadIntelServer emulates a joystick, so it sends data to an
arJoystickClient object just like "arJoystickServer". The two axes
correspond to the D-pad's horizontal and vertical axes; holding the
D-pad for a few moments increases the value.  The 20 buttons are the
following, in order:  A, B, C, X, Y, Z, L (left trigger), R (right
trigger); then the same buttons with the gamepad's shift key held down,
namely D, E, F, U, V, W, G, H;  then the HOME and END keys for the
gamepad's start button, unshifted and shifted.  Since Windows sees this
gamepad as a DirectInput keyboard, a normal keyboard can also be used. </p>
<hr><br>
<font size="+1">Ascension MotionStar Wireless 6DOF Tracker<br>
<br>
</font>
<p>Command: DeviceServer arMotionstarDriver [driver_slot]<br>
Platform: All platforms.<br>
Service: SZG_TRACKER<br>
</p>
<p>Run this on a host connected via Ethernet to the base station PC of
an Ascension Motionstar motion tracker. </p>
<pre>
TRACKER_COMPUTER SZG_TRACKER IPhost XXX.XXX.XXX.XXX

XXX.XXX.XXX.XXX is the IP address of the Motionstar base station.
</pre>
<hr><br>
<font size="+1">FaroArm<br>
<br>
</font>
<p>Command: DeviceServer arFaroDriver [driver_slot]<br>
Platform: All platforms.<br>
Service: none<br>
</p>
<p>Run this on a host connected via RS232 to a <a
 href="http://www.faro.com">FaroArm</a> mechanical motion tracker. It
reports one transformation matrix which takes into account the probe
dimensions, as well as two boolean-valued buttons.</p>
<hr><br>
<font size="+1">Ascension Flock-of-Birds 6DOF Tracker<br>
<br>
</font>
<p>Command: DeviceServer arBirdWinDriver [driver slot]<br>
Platform: Windows. We are working on a cross-platform FOB driver.<br>
Service: none<br>
</p>
<p>Run this on a host connected to an Ascension Flock of Birds motion
tracker. </p>
<hr><br>
<font size="+1">Ascension SpacePad<br>
<br>
</font>
<p>Command: DeviceServer arSpacepadDriver [driver_slot]<br>
Platform: Windows 98.<br>
Service: SZG_TRACKER<br>
</p>
<p>Run this on a host connected to an Ascension Spacepad motion
tracker. </p>
<pre>
TRACKER_COMPUTER SZG_TRACKER transmitter_offset 0.972229/0.196838/0.123962/0/-0.0494389/0.695801/-0.716003/0/-0.227356/0.69043/0.686707/0/0.0876952/6.71073/-2.72462/1

Matrix (a sequence of 16 floats, representing an 4x4 matrix, in OpenGL order)
by which we post-multiply the the matrix returned by the device.
This compensates for the possibility that the tracker antennae might be rotated
so that a sensor position that should be the identity matrix is, in fact, not
reported by the tracker that way.

TRACKER_COMPUTER SZG_TRACKER sensor0_rot 0/0/1/-90

A rotation matrix by which we pre-multiply the matrix returned by the
device. This compensates for the possibility that we might place the
sensors on the wand or glasses in something other than the default position.
Here, the head sensor (sensor 0) has been rolled by 90 degrees (i.e. it's 
on the side of the glasses).

TRACKER_COMPUTER SZG_TRACKER sensor1_rot 0/0/1/180

Same as above, but for sensor 1 (the wand sensor).
</pre>
<hr><br>
<font size="+1">Motion Analysis EVaRT Real-Time Optical Tracker<br>
<br>
</font>
<p>Command: DeviceServer arEVaRTDriver [driver_slot]<br>
Platform: Windows.<br>
Service: SZG_EVART<br>
</p>
<p>Run this to retrieve data from an EVaRT-based optical motion
tracking system from Motion Analysis. </p>
<pre>
TRACKER_COMPUTER SZG_EVART IPhost XXX.XXX.XXX.XXX

XXX.XXX.XXX.XXX gives the IP address of the EVaRT system.
</pre>
<hr><br>
<font size="+1">Intersense Trackers<br>
<br>
</font>
<p>Command: DeviceServer arIntersenseDriver [driver_slot]<br>
Platform: Windows/Linux.<br>
Service: SZG_INTERSENSE<br>
</p>
<p>Run this to retrieve data from an Intersense tracker. Due to the unified
nature of the Intersense tracker drivers, this should work with any of the
trackers in the Intersense line. </p>
<p>The Intersense driver is very configurable. You will need to set parameters
in the Phleet database to use your tracker.
<pre>
TRACKER_COMPUTER SZG_INTERSENSE sleep 10/0
  
Sleep for 10 msec between polling the tracker.

TRACKER_COMPUTER SZG_INTERSENSE station0_1 0/0/0

The 1st sensor associated with the 0th tracker has 0 buttons and 0 axes.
Perhaps it is a head sensor.

TRACKER_COMPUTER SZG_INTERSENSE station0_2 4/2/0

The 2nd sensor associated with the 0th tracker has 4 buttons and 2 axes.

TRACKER_COMPUTER SZG_INTERSENSE convert0_0 0/0/-1.0/2.0
TRACKER_COMPUTER SZG_INTERSENSE convert0_1 1.0/0/0/1.0
TRACKER_COMPUTER SZG_INTERSENSE convert0_2 0/-1.0/0/-2.0
TRACKER_COMPUTER SZG_INTERSENSE convert0_3 0/0/0/1.0

A 4x4 conversion matrix used to convert the Intersense coordinate system
to the Syzygy coordinate system. The 4th column (the translation) will
vary from installation to installation, but the first should be generally
applicable. Specifically,

( 0,  0, -1 )
( 1,  0,  0 )
( 0, -1,  0 )

Converts from Intersense coordinates to Syzygy coordinates.
</pre>
<p>PLEASE NOTE: You'll need to install the shared library (from Intersense)
as appropriate for your system to have this driver work.
<hr><br>
<font size="+1">vrpn Driver<br>
<br>
</font>
<p>Command: DeviceServer arVRPNDriver<br>
Platform: Linux.<br>
Service: SZG_VRPN.<br>
</p>
<p>This creates a bridge between Syzygy programs and input devices as 
managed by a vrpn server.</p>
<pre>
TRACKER_COMPUTER SZG_VRPN name

Here "name" designates the VRPN device to which one will connect.
</pre>
<hr><br>
<font size="+1">Motion Capture File<br>
<br>
</font>
<p>Command: DeviceServer arFileSource<br>
Platform: All platforms.<br>
Service: none<br>
</p>
<p>This driver provides playback of previously-captured input data. It
does so at the same approximate rate as the file's internal time
stamps. The file read is "inputdump.xml" as located by searching the
SZG_DATA/path. An input event stream can be recorded by sending a
DeviceServer instance a "dumpon" message. The logging is ended by
sending a "dumpoff" message. The event stream will be saved in a file
"inputdump.xml" in the SZG_DATA/path. </p>
<hr><font size="+2">Compound Devices<br>
</font><br>
The following are device drivers that combine the output from two input
devices into a single input stream. The local instance of DeviceServer
drives one device; it receives input from a second DeviceServer running
on another networked machine. The local instance combines the two data
streams. Event indices &nbsp;from the remote device are shifted
appropriately. For example, if the loca device provides 3 buttons and
the remote device provides &nbsp;3 buttons, then button events
originating locally will have indices 0-2 and those from the remote
device will be shifted upwards by 3 (3-5, in this example).<br>
<hr><br>
<font size="+1">MotionStar + Joystick<br>
<br>
</font>
<p>Command: DeviceServer arCubeTracker<br>
Platforms: Local: All; Remote: Depends on the joystick driver.<br>
Service: none<br>
</p>
<p>This starts up an arMotionstarDriver, and connects to a networked
sevice running in driver slot 1.It serves a data stream combining the
motion-tracking matrices (for head and wand) from the motionstar 
with the data from the remote source.
This combining makes it easier to reconfigure the interaction
by, for instance changing between an actual tracker and the
wandsimserver. </p>
<hr><br>
<font size="+1">SpacePad + Joystick<br>
<br>
</font>
<p>Command: DeviceServer arIdeskTracker<br>
Platforms: Windows98<br>
Service: none<br>
</p>
<p>This starts up a spacepad driver and a joystick driver, both 
locally.</p>
<hr><br>
<font size="+1">FaroArm + Flock-of-Birds<br>
<br>
</font>
<p>Command: DeviceServer arFaroFOB<br>
Platforms: Local: Any; Remote: Windows.<br>
Service: none<br>
</p>
<p>Run this on a host connected to a FaroArm. It connects to a remote
PC running a Flock-of-Birds, using driver slot 1</p>
<hr><br>
<font size="+1">MotionStar + FaroArm<br>
<br>
</font>
<p>Command: DeviceServer arFaroCalib<br>
Platforms: Local: Any; Remote: Any.<br>
Service: none<br>
</p>
<p>Run this on any host. It connects over the network to both the
Motionstar base PC and to the system hosting the FaroArm using
driver slot 1</p>
</body>
</html>
